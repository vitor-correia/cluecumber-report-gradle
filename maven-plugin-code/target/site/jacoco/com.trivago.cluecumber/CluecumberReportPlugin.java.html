<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>CluecumberReportPlugin.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Cluecumber Maven Plugin for Cucumber Reports</a> &gt; <a href="index.source.html" class="el_package">com.trivago.cluecumber</a> &gt; <span class="el_source">CluecumberReportPlugin.java</span></div><h1>CluecumberReportPlugin.java</h1><pre class="source lang-java linenums">/*
 * Copyright 2019 trivago N.V.
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package com.trivago.cluecumber;

import com.trivago.cluecumber.logging.CluecumberLogger;
import com.trivago.cluecumberCore.CluecumberReportPluginCore;
import com.trivago.cluecumberCore.exceptions.CluecumberPluginException;
import com.trivago.cluecumberCore.filesystem.FileIO;
import com.trivago.cluecumberCore.filesystem.FileSystemManager;
import com.trivago.cluecumberCore.json.JsonPojoConverter;
import com.trivago.cluecumberCore.json.processors.ElementIndexPreProcessor;
import com.trivago.cluecumberCore.logging.ICluecumberLogger;
import com.trivago.cluecumberCore.properties.PropertyManager;
import com.trivago.cluecumberCore.rendering.ReportGenerator;
import org.apache.maven.plugin.AbstractMojo;
import org.apache.maven.plugins.annotations.Mojo;
import org.apache.maven.plugins.annotations.Parameter;

import javax.inject.Inject;
import java.util.LinkedHashMap;

/**
 * The main plugin class.
 */
@Mojo(name = &quot;reporting&quot;)
public final class CluecumberReportPlugin extends AbstractMojo {

    private final PropertyManager propertyManager;
    private final FileSystemManager fileSystemManager;
    private final FileIO fileIO;
    private final JsonPojoConverter jsonPojoConverter;
    private final ElementIndexPreProcessor elementIndexPreProcessor;
    private final ReportGenerator reportGenerator;
    private final CluecumberReportPluginCore cluecumberReportPluginCore;

<span class="fc" id="L50">    private final ICluecumberLogger ilogger = new CluecumberLogger(getLog());</span>
//    private final LoggerUtils logger;
    /**
     * The path to the Cucumber JSON files.
     */
<span class="fc" id="L55">    @Parameter(property = &quot;reporting.sourceJsonReportDirectory&quot;, required = true)</span>
    private String sourceJsonReportDirectory = &quot;&quot;;

    /**
     * The location of the generated report.
     */
<span class="fc" id="L61">    @Parameter(property = &quot;reporting.generatedHtmlReportDirectory&quot;, required = true)</span>
    private String generatedHtmlReportDirectory = &quot;&quot;;

    /**
     * Custom parameters to add to the report.
     */
<span class="fc" id="L67">    @Parameter(property = &quot;reporting.customParameters&quot;)</span>
    private LinkedHashMap&lt;String, String&gt; customParameters = new LinkedHashMap&lt;&gt;();

    /**
     * Path to a properties file. The included properties are converted to custom parameters and added to the others.
     * &lt;pre&gt;
     * My_Custom_Parameter=This is my custom value
     * My_Custom_Parameter2=This is another value
     * &lt;/pre&gt;
     */
<span class="fc" id="L77">    @Parameter(property = &quot;reporting.customParametersFile&quot;)</span>
    private String customParametersFile = &quot;&quot;;

    /**
     * Mark scenarios as failed if they contain pending or undefined steps (default: false).
     */
    @Parameter(property = &quot;reporting.failScenariosOnPendingOrUndefinedSteps&quot;, defaultValue = &quot;false&quot;)
    private boolean failScenariosOnPendingOrUndefinedSteps;

    /**
     * Custom CSS that is applied on top of Cluecumber's default styles.
     */
<span class="fc" id="L89">    @Parameter(property = &quot;reporting.customCss&quot;)</span>
    private String customCss = &quot;&quot;;

    /**
     * Custom flag that determines if before and after hook sections of scenario detail pages should be expanded (default: false).
     */
    @Parameter(property = &quot;reporting.expandBeforeAfterHooks&quot;, defaultValue = &quot;false&quot;)
    private boolean expandBeforeAfterHooks;

    /**
     * Custom flag that determines if step hook sections of scenario detail pages should be expanded (default: false).
     */
    @Parameter(property = &quot;reporting.expandStepHooks&quot;, defaultValue = &quot;false&quot;)
    private boolean expandStepHooks;

    /**
     * Custom flag that determines if doc string sections of scenario detail pages should be expanded (default: false).
     */
    @Parameter(property = &quot;reporting.expandDocStrings&quot;, defaultValue = &quot;false&quot;)
    private boolean expandDocStrings;

    /**
     * Custom hex color for passed scenarios (e.g. '#00ff00')'.
     */
    @Parameter(property = &quot;reporting.customStatusColorPassed&quot;)
    private String customStatusColorPassed;

    /**
     * Custom hex color for failed scenarios (e.g. '#ff0000')'.
     */
    @Parameter(property = &quot;reporting.customStatusColorFailed&quot;)
    private String customStatusColorFailed;

    /**
     * Custom hex color for skipped scenarios (e.g. '#ffff00')'.
     */
    @Parameter(property = &quot;reporting.customStatusColorSkipped&quot;)
    private String customStatusColorSkipped;

    /**
     * Custom page title for the generated report.
     */
    @Parameter(property = &quot;reporting.customPageTitle&quot;)
    private String customPageTitle;

    /**
     * Optional log level to control what information is logged in the console.
     * Allowed values: default, compact, minimal, off
     */
    @Parameter(property = &quot;parallel.logLevel&quot;, defaultValue = &quot;default&quot;)
    String logLevel;

    /**
     * Skip Cluecumber report generation.
     */
    @Parameter(defaultValue = &quot;false&quot;, property = &quot;skip&quot;)
    private boolean skip;

    @Inject
    public CluecumberReportPlugin(
            final PropertyManager propertyManager,
            final FileSystemManager fileSystemManager,
            final FileIO fileIO,
            final JsonPojoConverter jsonPojoConverter,
            final ElementIndexPreProcessor elementIndexPreProcessor,
<span class="fc" id="L154">            final ReportGenerator reportGenerator) {</span>
<span class="fc" id="L155">        this.propertyManager = propertyManager;</span>
<span class="fc" id="L156">        this.fileSystemManager = fileSystemManager;</span>
<span class="fc" id="L157">        this.fileIO = fileIO;</span>
<span class="fc" id="L158">        this.jsonPojoConverter = jsonPojoConverter;</span>
<span class="fc" id="L159">        this.elementIndexPreProcessor = elementIndexPreProcessor;</span>
<span class="fc" id="L160">        this.reportGenerator = reportGenerator;</span>
<span class="fc" id="L161">        this.cluecumberReportPluginCore = new CluecumberReportPluginCore(</span>
                propertyManager,
                fileSystemManager,
                fileIO,
                jsonPojoConverter,
                elementIndexPreProcessor,
                reportGenerator
                );
<span class="fc" id="L169">    }</span>

    /**
     * Cluecumber Report start method.
     *
     * @throws CluecumberPluginException When thrown, the plugin execution is stopped.
     */
    public void execute() throws CluecumberPluginException {
<span class="fc" id="L177">        cluecumberReportPluginCore.taskCore(</span>
                ilogger,
<span class="fc" id="L179">                skip,</span>
                logLevel,
                sourceJsonReportDirectory,
                generatedHtmlReportDirectory,
                customParameters,
                customParametersFile,
                failScenariosOnPendingOrUndefinedSteps,
                customCss,
                expandBeforeAfterHooks,
                expandStepHooks,
                expandDocStrings,
                customStatusColorPassed,
                customStatusColorFailed,
                customStatusColorSkipped,
                customPageTitle
        );
<span class="fc" id="L195">    }</span>
}



</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.4.201905082037</span></div></body></html>